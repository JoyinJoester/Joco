# 游戏手柄鼠标控制器

这个Rust程序允许你使用游戏手柄来控制电脑的鼠标光标，支持自动检测手柄连接和断开，并具有崩溃恢复功能。

## 功能

- 使用右摇杆控制鼠标移动
- 使用左摇杆控制鼠标滚轮
- A按钮 (南/下按钮) 执行鼠标左键点击
- B按钮 (东/右按钮) 执行鼠标右键点击
- 内置鼠标加速度和死区设置，使控制更精确
- **自动检测并处理手柄连接与断开**
- **程序崩溃后自动恢复**
- **图形界面，方便配置和监控状态**
- **支持多种品牌手柄**
- **支持手柄热插拔**

## 系统要求

- Windows系统 (也可以在Linux和macOS上运行，但可能需要额外配置)
- Rust编程环境
- 支持DirectInput或XInput的游戏手柄

## 安装

### 从预编译版本安装

1. 从GitHub的Releases页面下载最新版本的zip包
2. 解压到任意文件夹
3. 运行 `gamepad-mouse-control.exe`

### 从源代码编译

1. 确保已安装Rust和Cargo (https://www.rust-lang.org/tools/install)
2. 克隆或下载此仓库
3. 在项目目录中运行 `cargo build --release`
4. 运行 `prepare_release.bat` 脚本，它会自动准备好可分发的程序
5. 编译好的程序和必要文件位于 `dist` 文件夹中

## 使用方法

1. 将游戏手柄连接到电脑
2. 运行程序 `gamepad-mouse-control.exe`
3. 程序将自动检测连接的游戏手柄并开始监听输入

## 配置

你可以在源代码中修改以下常量来调整控制灵敏度：

```rust
const MOUSE_SENSITIVITY: f32 = 10.0;      // 鼠标移动速度
const DEAD_ZONE: f32 = 0.15;              // 摇杆死区，低于此值的输入被忽略
const SCROLL_SENSITIVITY: f32 = 5.0;      // 滚轮灵敏度
const MOUSE_ACCELERATION: f32 = 1.5;      // 鼠标加速度
```

## 故障排除

- **"未找到连接的手柄"错误**: 确保游戏手柄已正确连接，并被Windows识别。可以在设备管理器中检查。
- **手柄连接但程序没有响应**: 某些手柄可能需要特定的驱动程序，请确保安装了最新的驱动程序。
- **控制不精确**: 尝试调整源代码中的灵敏度和死区参数。
- **手柄断开连接后程序不能恢复**: 程序会自动尝试重新连接，但如果多次尝试失败，可以关闭并重新启动程序。
- **程序崩溃**: 新版本实现了崩溃恢复功能，程序会尝试自动重启并恢复之前的设置。

## 高级功能说明

### 手柄热插拔支持
程序能够检测到手柄的断开和重新连接。当手柄断开时，程序会自动释放所有鼠标按键并进入等待状态。一旦手柄重新连接，程序会自动恢复工作，无需手动干预。

### 崩溃恢复
如果程序因意外原因崩溃，内置的恢复机制会尝试保存当前状态并重新启动程序。这确保了长时间使用的稳定性。

### 图形界面
- 状态指示器：显示当前连接的手柄名称和状态
- 配置面板：调整鼠标灵敏度、加速度和死区设置
- 按钮映射：可自定义哪些手柄按钮对应哪些鼠标功能

## 未来计划

- 完全可视化的按钮映射配置器
- 多手柄同时支持
- 更多预设配置文件，适用于不同类型的应用场景
- 手柄轮廓识别，自动为不同品牌的手柄应用最佳设置

## 许可

MIT License
